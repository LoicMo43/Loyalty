

<div class="row">
    <div class="col-md-12">
        <form action="{url path='/admin/loyalty/update'}" method="post">
            <div class="general-block-decorator">
                <div class="table-responsive">
                    <table class="table table-striped table-condensed table-left-aligned">
                        <caption class="clearfix">
                            {intl l='Thelia loyalty system'}
                                <div class="pull-right">
                                    <a class="btn btn-default btn-primary action-btn" title="{intl l='Add a new variable'}" href="#creation_dialog" data-toggle="modal">
                                        <span class="glyphicon glyphicon-plus-sign"></span>
                                    </a>
                                    <button class="btn btn-default btn-primary" title="{intl l='Save chages'}"><span class="glyphicon glyphicon-ok"></span> {intl l='Save changes'}</button>
                                </div>

                        </caption>

                        <thead>
                        <tr>
                            <th>
                                {intl l="minimum"}
                            </th>

                            <th>
                                {intl l="maximum"}
                            </th>

                            <th>
                                {intl l="profit"}
                            </th>



                            <th>{intl l='Action'}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {loop name="loyalty_list" type="loyalty" backend_context="1"}
                            <tr>

                                <td>
                                    <input id="min_{$ID}" class="js-edit form-control" data-id="{$ID}" type="text" name="loyalty_min[{$ID}]" value="{$MIN}" />
                                </td>
                                <td>
                                    <input id="max_{$ID}" class="js-edit form-control" data-id="{$ID}" type="text" name="loyalty_max[{$ID}]" value="{$MAX}" />
                                </td>
                                <td>
                                    <input id="amount_{$ID}" class="js-edit form-control" data-id="{$ID}" type="text" name="loyalty_amount[{$ID}]" value="{$AMOUNT}" />
                                </td>

                                <td class="actions">
                                        <div class="btn-group">
                                            <a class="btn btn-default btn-xs config-delete" title="{intl l='Delete this slice'}" href="#delete_variable_dialog" data-id="{$ID}" data-toggle="modal"><i class="glyphicon glyphicon-trash"></i></a>
                                        </div>

                                </td>
                            </tr>
                        {/loop}
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    </div>
</div>

{form name="loyalty_create"}

    {* Capture the dialog body, to pass it to the generic dialog *}
{capture "creation_dialog"}

    {form_hidden_fields form=$form}

    {form_field form=$form field='min'}
        <div class="form-group {if $error}has-error{/if}">
            <label for="{$label_attr.for}" class="control-label">{$label} : </label>
            <input type="text" id="{$label_attr.for}" required="required" name="{$name}" value="{$value}" title="{intl l='Variable name'}" placeholder="{intl l='Variable name'}" class="form-control">
        </div>
    {/form_field}

    {form_field form=$form field='max'}
        <div class="form-group {if $error}has-error{/if}">
            <label for="{$label_attr.for}" class="control-label">{$label} : </label>
            <input type="text" id="{$label_attr.for}" name="{$name}" value="{$value}" title="{intl l='Variable value'}" placeholder="{intl l='Variable value'}" class="form-control">
        </div>
    {/form_field}

    {form_field form=$form field='amount'}
        <div class="form-group {if $error}has-error{/if}">
            <label for="{$label_attr.for}" class="control-label">{$label} : </label>
            <input type="text" id="{$label_attr.for}" name="{$name}" value="{$value}" title="{intl l='Variable value'}" placeholder="{intl l='Variable value'}" class="form-control">
        </div>
    {/form_field}
{/capture}

    {include
    file = "includes/generic-create-dialog.html"

    dialog_id    = "creation_dialog"
    dialog_title = {intl l="Create a new slice"}
    dialog_body  = {$smarty.capture.creation_dialog nofilter}

dialog_ok_label     = {intl l="Create this slice"}

form_action        = {url path='/admin/loyalty/create'}
form_enctype       = {form_enctype form=$form}
form_error_message = $form_error_message
}
{/form}

{* Delete category confirmation dialog *}

{capture "delete_dialog"}
    <input type="hidden" name="slice_id" id="variable_delete_id" value="" />
{/capture}

{include
file = "includes/generic-confirm-dialog.html"

dialog_id       = "delete_variable_dialog"
dialog_title    = {intl l="Delete a loyalty slice"}
dialog_message  = {intl l="Do you really want to delete this slice ?"}

form_action         = {url path='/admin/loyalty/delete'}
form_content        = {$smarty.capture.delete_dialog nofilter}
}
